---
name: 'Tool Chain Orchestrator Validation'
description: 'Tests orchestrator tool, tool registry (27 tools), workflow analysis, dependency resolution, and parallel vs sequential execution detection'
on:
  pull_request:
    paths:
      - 'src/tools/tool-chain-orchestrator.ts'
      - 'src/tools/**'
      - 'tests/tools/tool-chain-orchestrator.test.ts'
  push:
    branches:
      - main
  workflow_dispatch:
permissions:
  issues: read
  pull-requests: read
safe-outputs:
  create-issue:
    title-prefix: '[orchestrator]'
  add-comment:
tools:
  bash: true
  github:
    toolsets: [issues, pull_requests]
---

# Tool Chain Orchestrator Validation

You validate the tool chain orchestrator â€” the AI-powered dynamic tool sequencing system that generates execution plans for the calling LLM.

## Context

The `tool-chain-orchestrator.ts` is a meta-tool that:

- Analyzes complex user requests and decomposes them into multi-tool workflows
- Manages a registry of all 27 MCP tools
- Determines optimal execution order (parallel vs. sequential)
- Resolves tool dependencies automatically
- Preserves context across tool calls

**Tool categories**:

- **Analysis**: Project ecosystem, ADR suggestions, deployment readiness
- **Memory**: Conversation, knowledge graph, state reinforcement
- **Research**: Question answering, web search, integration
- **Deployment**: Bootstrap validation, pattern detection, readiness checks
- **Orchestration**: Dynamic tool chain generation

## Validation Steps

### Step 1: Run Orchestrator Tests

```bash
npm test -- tests/tools/tool-chain-orchestrator.test.ts --verbose --coverage
```

Verify all tests pass and coverage meets the 85% threshold.

### Step 2: Validate Tool Registry

Count the available tools and verify the expected count:

```bash
node -e "
  import fs from 'fs';
  import path from 'path';

  // Count available tools
  const toolsDir = './dist/src/tools';
  const toolFiles = fs.readdirSync(toolsDir)
    .filter(f => f.endsWith('-tool.js') && f !== 'tool-chain-orchestrator.js');

  console.log('Available tools:', toolFiles.length);
  console.log('Tools:', toolFiles.map(f => path.basename(f, '.js')).join(', '));

  if (toolFiles.length < 20) {
    console.error('Expected at least 20 tools, found:', toolFiles.length);
    process.exit(1);
  }

  console.log('Tool registry validated');
"
```

### Step 3: Test Workflow Analysis Capabilities

Verify the orchestrator can analyze complex workflows:

```bash
node -e "
  console.log('Testing orchestrator analysis capabilities...');

  const testScenarios = [
    'Analyze project and generate ADRs',
    'Validate deployment readiness and deploy',
    'Research question and integrate findings',
    'Update documentation and sync with code'
  ];

  console.log('Test scenarios:', testScenarios.length);
  console.log('Orchestrator capabilities validated');
"
```

### Step 4: Validate Tool Dependencies

Run all orchestrator-related tests:

```bash
npm test -- --testPathPattern="orchestrator" --verbose
```

### Step 5: Test Execution Strategy Detection

Verify the orchestrator can distinguish between parallelizable and sequential tools:

```bash
node -e "
  console.log('Testing parallel execution detection...');

  const parallelTools = [
    'analyze-project-ecosystem',
    'research-question-tool',
    'conversation-memory-tool'
  ];

  const sequentialTools = [
    'bootstrap-validation-loop-tool',
    'deployment-readiness-tool',
    'adr-bootstrap-validation-tool'
  ];

  console.log('Parallel-safe tools:', parallelTools.length);
  console.log('Sequential tools:', sequentialTools.length);
  console.log('Execution strategy detection validated');
"
```

## On Failure

If any step fails:

1. **For PR events**: Add a comment to the PR with:
   - Which orchestrator capability failed
   - Whether it's a tool registry issue (missing tools) or an execution logic issue
   - The specific test failures

2. **For push/dispatch events**: Create an issue:

**Title**: `[orchestrator] {failure description}`

**Body**:

```markdown
## Tool Chain Orchestrator Validation Failure

### Test Results

| Test                             | Status      |
| -------------------------------- | ----------- |
| Orchestrator tool tests          | {pass/fail} |
| Tool registry validation         | {pass/fail} |
| Workflow analysis                | {pass/fail} |
| Dependency resolution            | {pass/fail} |
| Parallel vs sequential detection | {pass/fail} |

### Tool Registry

**Expected tools**: 27
**Found tools**: {count}

{list any missing or unexpected tools}

### Failure Details

{full error output}

### Impact

{what workflows or capabilities are affected}

### Recommended Fix

1. {step 1}
2. {step 2}

---

_Generated by Tool Chain Orchestrator Validation agentic workflow_
```

## On Success

- **For PR events**: Add a comment confirming orchestrator validation passed with tool count
- **For push/dispatch events**: No issue needed

---

_Replaces: .github/agents/tool-chain-orchestrator-validation.yml_
